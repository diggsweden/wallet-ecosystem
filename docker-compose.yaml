# SPDX-FileCopyrightText: 2025 The Wallet Ecosystem Authors
#
# SPDX-License-Identifier: CC0-1.0

name: wallet-ecosystem-local

networks:
  wallet-ecosystem-network:
    name: wallet-ecosystem-network

services:
  refimpl-verifier-backend:
    image: ghcr.io/eu-digital-identity-wallet/eudi-srv-web-verifier-endpoint-23220-4-kt:v0.6.4
    container_name: refimpl-verifier-backend
    hostname: refimpl-verifier-backend
    volumes:
      - ./config/verifier/refimpl-verifier-backend-keystore.jks:/opt/common/refimpl-verifier-backend-keystore.jks:ro
      - ./config/verifier/verifier_cert.p12:/opt/common/verifier_cert.p12:ro
    environment:
      SPRING_WEBFLUX_BASEPATH: "/refimpl-verifier-backend"
      VERIFIER_PUBLICURL: "https://localhost/refimpl-verifier-backend"
      VERIFIER_ORIGINALCLIENTID: "refimpl-verifier-backend.wallet.local"
      VERIFIER_CLIENTIDPREFIX: "x509_san_dns"
      VERIFIER_JAR_SIGNING_ALGORITHM: "ES256"
      VERIFIER_JAR_SIGNING_KEY: "LoadFromKeystore"
      SPRING_PROFILES_ACTIVE: "dev"
      VERIFIER_JAR_SIGNING_KEY_KEYSTORE: "file:///opt/common/refimpl-verifier-backend-keystore.jks"
      VERIFIER_JAR_SIGNING_KEY_KEYSTORE_TYPE: "jks"
      VERIFIER_JAR_SIGNING_KEY_KEYSTORE_PASSWORD: "vpjhIaUd04ucNz6I"
      VERIFIER_JAR_SIGNING_KEY_ALIAS: "verifier"
      VERIFIER_JAR_SIGNING_KEY_PASSWORD: "vpjhIaUd04ucNz6I"
      VERIFIER_VALIDATION_SDJWTVC_STATUSCHECK_ENABLED: "false"
      VERIFIER_TRUSTSOURCES_0_PATTERN: "urn:eudi:pid:.*"
      VERIFIER_TRUSTSOURCES_0_KEYSTORE_PATH: "file:///opt/common/verifier_cert.p12"
      VERIFIER_TRUSTSOURCES_0_KEYSTORE_TYPE: "PKCS12"
      VERIFIER_TRUSTSOURCES_0_KEYSTORE_PASSWORD: "pass1234"
      VERIFIER_RESPONSE_MODE: "DirectPost"
      LOGGING_LEVEL_EU_EUROPA_EC_EUDI_VERIFIER_ENDPOINT: "DEBUG"
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.refimpl-verifier-backend.rule=PathPrefix(`/refimpl-verifier-backend`)"
      - "traefik.http.routers.refimpl-verifier-backend.entrypoints=websecure"
      - "traefik.http.routers.refimpl-verifier-backend.tls=true"
      - "traefik.http.routers.refimpl-verifier-backend.service=refimpl-verifier-backend"
      - "traefik.http.services.refimpl-verifier-backend.loadbalancer.server.port=8080"
    networks:
      - wallet-ecosystem-network

  wallet-provider:
    image: ghcr.io/diggsweden/wallet-provider:main
    container_name: wallet-provider
    hostname: wallet-provider
    volumes:
      - ./config/wallet-provider/wallet_provider_cert.p12:/opt/common/wallet_provider_cert.p12
    environment:
      SERVER_SERVLET_CONTEXT_PATH: "/wallet-provider"
      SPRING_PROFILES_ACTIVE: "prod"
      TZ: "Europe/Stockholm"
      JAVA_OPTS: "-Djava.net.preferIPv4Stack=true"
      WUA_KEYSTORE_PATH: "file:///opt/common/wallet_provider_cert.p12"
      WUA_KEYSTORE_PASSWORD: "pass1234"
      WUA_KEYSTORE_ALIAS: "wallet_provider_cert"
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.wallet-provider.rule=PathPrefix(`/wallet-provider`)"
      - "traefik.http.routers.wallet-provider.entrypoints=websecure"
      - "traefik.http.routers.wallet-provider.tls=true"
      - "traefik.http.routers.wallet-provider.service=wallet-provider"
      - "traefik.http.services.wallet-provider.loadbalancer.server.port=8080"
    networks:
      - wallet-ecosystem-network

  custom-verifier:
    image: ghcr.io/diggsweden/wallet-verifier-test-web:0.0.6
    container_name: custom-verifier
    hostname: custom-verifier
    environment:
      HOST_API: "http://refimpl-verifier-backend:8080/refimpl-verifier-backend"
      PORT: "3002"
      NITRO_PORT: "3002"
      NUXT_PUBLIC_BASE_URL: "https://localhost/custom-verifier"
      NUXT_APP_BASE_URL: "/custom-verifier"
      NODE_TLS_REJECT_UNAUTHORIZED: "0"
    depends_on:
      - refimpl-verifier-backend
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.custom-verifier.rule=PathPrefix(`/custom-verifier`)"
      - "traefik.http.routers.custom-verifier.entrypoints=websecure"
      - "traefik.http.routers.custom-verifier.tls=true"
      - "traefik.http.services.custom-verifier.loadbalancer.server.port=3002"
    restart: on-failure
    networks:
      - wallet-ecosystem-network

  refimpl-verifier:
    image: ghcr.io/eu-digital-identity-wallet/eudi-web-verifier:v0.9.1
    container_name: refimpl-verifier
    healthcheck:
      test: curl -f http://refimpl-verifier:4300/home || exit 1
      start_period: 15s
      interval: 30s
      retries: 3
    environment:
      DOMAIN_NAME: "refimpl-verifier.wallet.local"
      HOST_API: "https://localhost/refimpl-verifier-backend"
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.refimpl-verifier.rule=Host(`refimpl-verifier.wallet.local`)"
      - "traefik.http.routers.refimpl-verifier.entrypoints=websecure"
      - "traefik.http.routers.refimpl-verifier.tls=true"
      - "traefik.http.routers.refimpl-verifier.service=refimpl-verifier"
      - "traefik.http.services.refimpl-verifier.loadbalancer.server.port=4300"
    networks:
      - wallet-ecosystem-network

  pid-issuer:
    image: ghcr.io/eu-digital-identity-wallet/eudi-srv-pid-issuer:v0.7.0
    container_name: pid-issuer
    depends_on:
      keycloak:
        condition: service_healthy
    environment:
      - SPRING_PROFILES_ACTIVE=insecure
      - SPRING_WEBFLUX_BASE_PATH=/pid-issuer
      - SERVER_PORT=8080
      - SPRING_SECURITY_OAUTH2_RESOURCESERVER_OPAQUETOKEN_CLIENT_ID=pid-issuer-srv
      - SPRING_SECURITY_OAUTH2_RESOURCESERVER_OPAQUETOKEN_CLIENT_SECRET=zIKAV9DIIIaJCzHCVBPlySgU8KgY68U2
      - SERVER_FORWARD_HEADERS_STRATEGY=FRAMEWORK
      - ISSUER_PUBLICURL=https://localhost/pid-issuer
      - ISSUER_AUTHORIZATIONSERVER_PUBLICURL=https://localhost/idp/realms/pid-issuer-realm
      - ISSUER_AUTHORIZATIONSERVER_METADATA=http://keycloak:8080/idp/realms/pid-issuer-realm/.well-known/openid-configuration
      - ISSUER_AUTHORIZATIONSERVER_INTROSPECTION=http://keycloak:8080/idp/realms/pid-issuer-realm/protocol/openid-connect/token/introspect
      - ISSUER_CREDENTIALRESPONSEENCRYPTION_SUPPORTED=true
      - ISSUER_CREDENTIALRESPONSEENCRYPTION_REQUIRED=true
      - ISSUER_CREDENTIALRESPONSEENCRYPTION_ALGORITHMSSUPPORTED=ECDH-ES
      - ISSUER_CREDENTIALRESPONSEENCRYPTION_ENCRYPTIONMETHODS=A128GCM
      - ISSUER_PID_MSO_MDOC_ENABLED=true
      - ISSUER_PID_MSO_MDOC_ENCODER_DURATION=P30D
      - ISSUER_PID_MSO_MDOC_NOTIFICATIONS_ENABLED=true
      - ISSUER_PID_SD_JWT_VC_ENABLED=true
      - ISSUER_PID_SD_JWT_VC_NOTUSEBEFORE=PT20S
      - ISSUER_PID_SD_JWT_VC_NOTIFICATIONS_ENABLED=true
      - ISSUER_PID_ISSUINGCOUNTRY=SE
      - ISSUER_PID_ISSUINGJURISDICTION=SE-Y # VÃ¤sternorrland
      - ISSUER_EHIC_ISSUINGCOUNTRY=SE
      - ISSUER_MDL_ENABLED=true
      - ISSUER_MDL_MSO_MDOC_ENCODER_DURATION=P5D
      - ISSUER_MDL_NOTIFICATIONS_ENABLED=true
      - ISSUER_CREDENTIALOFFER_URI=openid-credential-offer://
      - ISSUER_SIGNING_KEY=LoadFromKeystore
      - ISSUER_SIGNING_KEY_KEYSTORE=file:///opt/common/issuer_cert.p12
      - ISSUER_SIGNING_KEY_KEYSTORE_TYPE=PKCS12
      - ISSUER_SIGNING_KEY_KEYSTORE_PASSWORD=pass1234
      - ISSUER_SIGNING_KEY_ALIAS=issuer_cert
      - ISSUER_SIGNING_KEY_PASSWORD=pass1234
      - ISSUER_METADATA_SIGNED_METADATA_ENABLED=false
      - ISSUER_KEYCLOAK_SERVER_URL=http://keycloak:8080/idp
      - ISSUER_KEYCLOAK_AUTHENTICATION_REALM=master
      - ISSUER_KEYCLOAK_CLIENT_ID=admin-cli
      - ISSUER_KEYCLOAK_USERNAME=admin
      - ISSUER_KEYCLOAK_PASSWORD=password
      - ISSUER_KEYCLOAK_USER_REALM=pid-issuer-realm
      - ISSUER_DPOP_PROOF_MAX_AGE=PT1M
      - ISSUER_DPOP_CACHE_PURGE_INTERVAL=PT10M
      - ISSUER_DPOP_REALM=pid-issuer
      - ISSUER_DPOP_NONCE_ENABLED=false
      - ISSUER_CREDENTIALENDPOINT_BATCHISSUANCE_ENABLED=true
      - ISSUER_CREDENTIALENDPOINT_BATCHISSUANCE_BATCHSIZE=10
      - ISSUER_CNONCE_EXPIRATION=PT5M
      - ISSUER_METADATA_DISPLAY_0_LOGO_URI=https://wallet.sandbox.digg.se/images/digg_logo.jpeg
      - ISSUER_METADATA_DISPLAY_0_NAME=DIGG issuer
    volumes:
      - ./config/issuer/issuer_cert.p12:/opt/common/issuer_cert.p12:ro
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.pid-issuer.rule=PathPrefix(`/pid-issuer`)"
      - "traefik.http.routers.pid-issuer.entrypoints=websecure"
      - "traefik.http.routers.pid-issuer.tls=true"
      - "traefik.http.routers.pid-issuer.service=pid-issuer"
      - "traefik.http.routers.well-known-pid-issuer.rule=PathRegexp(`^/.well-known/([a-zA-Z-]+)/pid-issuer$`)"
      - "traefik.http.routers.well-known-pid-issuer.entrypoints=websecure"
      - "traefik.http.routers.well-known-pid-issuer.tls=true"
      - "traefik.http.routers.well-known-pid-issuer.service=pid-issuer"
      - "traefik.http.routers.well-known-pid-issuer.middlewares=well-known-pid-issuer-replace-path"
      - "traefik.http.middlewares.well-known-pid-issuer-replace-path.replacepathregex.regex=^/.well-known/([a-zA-Z-]+)/pid-issuer$"
      - "traefik.http.middlewares.well-known-pid-issuer-replace-path.replacepathregex.replacement=/pid-issuer/.well-known/$1"
      - "traefik.http.services.pid-issuer.loadbalancer.server.port=8080"
    networks:
      - wallet-ecosystem-network

  wallet-attribute-attestation-db:
    image: "postgres:16"
    container_name: wallet-attribute-attestation-db
    restart: always
    environment:
      POSTGRES_USER: wallet-attribute-attestation
      POSTGRES_PASSWORD: pass
      POSTGRES_DATABASE: wallet-attribute-attestation
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U wallet-attribute-attestation -d wallet-attribute-attestation"]
      interval: 5s
      timeout: 5s
      retries: 5
    networks:
      - wallet-ecosystem-network

  wallet-attribute-attestation:
    image: ghcr.io/diggsweden/wallet-attribute-attestation:v0.0.5
    container_name: wallet-attribute-attestation
    hostname: wallet-attribute-attestation
    volumes:
      - ./config/common/Healthcheck.class:/opt/Healthcheck.class:ro
    environment:
      SERVER_SERVLET_CONTEXT_PATH: "/wallet-attribute-attestation"
      SPRING_PROFILES_ACTIVE: "prod"
      TZ: "Europe/Stockholm"
      JAVA_OPTS: "-Djava.net.preferIPv4Stack=true"
      SERVER_PORT: "8080"
      SPRING_DATASOURCE_URL: "jdbc:postgresql://wallet-attribute-attestation-db:5432/wallet-attribute-attestation"
      SPRING_DATASOURCE_USERNAME: "wallet-attribute-attestation"
      SPRING_DATASOURCE_PASSWORD: "pass"
    ports:
      - "8081:8080"
    depends_on:
      wallet-attribute-attestation-db:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "java", "--class-path", "/opt", "Healthcheck", "http://localhost:8080/wallet-attribute-attestation/actuator/health"]
      start_period: 5s
      interval: 5s
      retries: 5
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.wallet-attribute-attestation.rule=PathPrefix(`/wallet-attribute-attestation`)"
      - "traefik.http.routers.wallet-attribute-attestation.entrypoints=websecure"
      - "traefik.http.routers.wallet-attribute-attestation.tls=true"
      - "traefik.http.routers.wallet-attribute-attestation.service=wallet-attribute-attestation"
      - "traefik.http.services.wallet-attribute-attestation.loadbalancer.server.port=8080"
    networks:
      - wallet-ecosystem-network

  wallet-account-db:
    image: "postgres:16"
    container_name: wallet-account-db
    restart: always
    environment:
      POSTGRES_USER: wallet-account
      POSTGRES_PASSWORD: pass
      POSTGRES_DATABASE: wallet-account
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U wallet-account -d wallet-account"]
      interval: 5s
      timeout: 5s
      retries: 5
    networks:
      - wallet-ecosystem-network

  wallet-account:
    image: ghcr.io/diggsweden/wallet-account:v0.0.5
    container_name: wallet-account
    hostname: wallet-account
    volumes:
      - ./config/common/Healthcheck.class:/opt/Healthcheck.class:ro
    environment:
      SERVER_SERVLET_CONTEXT_PATH: "/wallet-account"
      SPRING_PROFILES_ACTIVE: "prod"
      TZ: "Europe/Stockholm"
      JAVA_OPTS: "-Djava.net.preferIPv4Stack=true"
      SERVER_PORT: "8080"
      SPRING_DATASOURCE_URL: "jdbc:postgresql://wallet-account-db:5432/wallet-account"
      SPRING_DATASOURCE_USERNAME: "wallet-account"
      SPRING_DATASOURCE_PASSWORD: "pass"
    ports:
      - "8083:8080"
    depends_on:
      wallet-account-db:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "java", "--class-path", "/opt", "Healthcheck", "http://localhost:8080/wallet-account/actuator/health"]
      start_period: 5s
      interval: 5s
      retries: 5
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.wallet-account.rule=PathPrefix(`/wallet-account`)"
      - "traefik.http.routers.wallet-account.entrypoints=websecure"
      - "traefik.http.routers.wallet-account.tls=true"
      - "traefik.http.routers.wallet-account.service=wallet-account"
      - "traefik.http.services.wallet-account.loadbalancer.server.port=8080"
    networks:
      - wallet-ecosystem-network

  wallet-client-gateway-valkey:
    image: "valkey/valkey:9.0.0-alpine"
    container_name: wallet-client-gateway-valkey
    restart: always
    healthcheck:
      test: ["CMD", "valkey-cli", "--raw", "incr", "ping"]
      interval: 5s
      timeout: 5s
      retries: 5
    ports:
      - "6379:6379"
    networks:
      - wallet-ecosystem-network

  wallet-client-gateway:
    image: ghcr.io/diggsweden/wallet-client-gateway:v0.4.0
    container_name: wallet-client-gateway
    hostname: wallet-client-gateway
    volumes:
      - ./config/common/Healthcheck.class:/opt/Healthcheck.class:ro
      - ./config/wallet-client-gateway/keystore-wallet-app-bff-local.p12:/opt/keystore-wallet-app-bff-local.p12:ro
    environment:
      LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_SECURITY: DEBUG
      SERVER_SERVLET_CONTEXT_PATH: "/wallet-client-gateway"
      SPRING_PROFILES_ACTIVE: "prod"
      TZ: "Europe/Stockholm"
      JAVA_OPTS: "-Djava.net.preferIPv4Stack=true"
      SERVER_PORT: "8080"
      PROPERTIES_APISECRET: "apikey"
      PROPERTIES_WALLETPROVIDER_BASEURL: "http://wallet-provider:8080/wallet-provider"
      PROPERTIES_ATTRIBUTEATTESTATION_BASEURL: "http://wallet-attribute-attestation:8080/wallet-attribute-attestation"
      PROPERTIES_WALLETACCOUNT_BASEURL: "http://wallet-account:8080/wallet-account"
      PROPERTIES_AUTHORIZATION_SERVER_PRIVATE_JWT_AUDIENCE: "https://localhost/idp/realms/wallet/protocol/openid-connect/token"
      PROPERTIES_OIDC_CLAIMS_PERSONAL_IDENTITY_NUMBER: personalIdentityNumberClaim
      ENVIRONMENT_OAUTH2_AUTHORIZATION_SERVER_BASE_URL: "http://keycloak:8080/idp/realms/wallet/protocol/openid-connect"
      ENVIRONMENT_OAUTH2_CLIENT_ID: "wallet-test"
      ENVIRONMENT_OAUTH2_PRIVATE_JWT_KEY_FILE: file:/opt/keystore-wallet-app-bff-local.p12
      ENVIRONMENT_OAUTH2_PRIVATE_JWT_KEY_FILE_PASSWORD: changeit
      ENVIRONMENT_OAUTH2_PRIVATE_JWT_KEY_FILE_TYPE: PKCS12
      ENVIRONMENT_OAUTH2_PRIVATE_JWT_KEY_ALIAS: wallet-app-bff-local
      ENVIRONMENT_OAUTH2_PRIVATE_JWT_KEY_PASSWORD: changeit
      SPRING_DATA_REDIS_HOST: "wallet-client-gateway-valkey"
      SPRING_DATA_REDIS_PORT: "6379"
      SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_IAM_REDIRECT-URI: "https://localhost/wallet-client-gateway/login/oauth2/code/iam"
      SPRING_SECURITY_OAUTH2_CLIENT_PROVIDER_IAM_AUTHORIZATION-URI: "https://localhost/idp/realms/wallet/protocol/openid-connect/auth"
      SERVER_FORWARD_HEADERS_STRATEGY: "framework"
    ports:
      - "8082:8080"
    depends_on:
      wallet-provider:
        condition: service_started
      wallet-attribute-attestation:
        condition: service_started
      wallet-account:
        condition: service_started
      wallet-client-gateway-valkey:
        condition: service_healthy
      keycloak:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "java", "--class-path", "/opt", "Healthcheck", "http://localhost:8080/wallet-client-gateway/actuator/health"]
      start_period: 5s
      interval: 5s
      retries: 5
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.wallet-client-gateway.rule=PathPrefix(`/wallet-client-gateway`)"
      - "traefik.http.routers.wallet-client-gateway.entrypoints=websecure"
      - "traefik.http.routers.wallet-client-gateway.tls=true"
      - "traefik.http.routers.wallet-client-gateway.service=wallet-client-gateway"
      - "traefik.http.services.wallet-client-gateway.loadbalancer.server.port=8080"
    networks:
      - wallet-ecosystem-network
  keycloak:
    image: quay.io/keycloak/keycloak:26.3.4-0
    container_name: keycloak
    command:
      - start-dev
      - --import-realm
      - --features=dpop,passkeys
    environment:
      - KC_PROXY_HEADERS=xforwarded
      - KC_HTTP_ENABLED=true
      - KC_HTTP_RELATIVE_PATH=/idp
      - KC_HEALTH_ENABLED=true
      - KC_HOSTNAME=https://localhost/idp
      - KC_HOSTNAME_BACKCHANNEL_DYNAMIC=true
      - KC_BOOTSTRAP_ADMIN_USERNAME=admin
      - KC_BOOTSTRAP_ADMIN_PASSWORD=password

    healthcheck:
      test: "bash /opt/keycloak/health-check.sh"
      interval: 5s
      timeout: 10s
      retries: 12
      start_interval: 30s
      start_period: 30s
    volumes:
      - ./config/keycloak/extra/health-check.sh:/opt/keycloak/health-check.sh
      - ./config/keycloak/realms/:/opt/keycloak/data/import
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.keycloak.rule=PathPrefix(`/idp`)"
      - "traefik.http.routers.keycloak.entrypoints=websecure"
      - "traefik.http.routers.keycloak.tls=true"
      - "traefik.http.routers.keycloak.service=keycloak"
      - "traefik.http.services.keycloak.loadbalancer.server.port=8080"
      - "traefik.http.routers.keycloak.middlewares=keycloak-replace-path"
      - "traefik.http.middlewares.keycloak-replace-path.replacepathregex.regex=^/keycloak/.well-known/([a-zA-Z-]+)/idp/realms/([a-zA-Z-]+)/?"
      - "traefik.http.middlewares.keycloak-replace-path.replacepathregex.replacement=/idp/realms/$2/.well-known/$1"
      - "traefik.http.routers.well-known-oauth-server.rule=PathPrefix(`/.well-known/oauth-authorization-server`)"
      - "traefik.http.routers.well-known-oauth-server.entrypoints=websecure"
      - "traefik.http.routers.well-known-oauth-server.tls=true"
      - "traefik.http.routers.well-known-oauth-server.service=keycloak"
      - "traefik.http.routers.well-known-oauth-server.middlewares=well-known-oauth-server-replace-path"
      - "traefik.http.middlewares.well-known-oauth-server-replace-path.replacepathregex.regex=^/.well-known/([a-zA-Z-]+)/idp/realms/([a-zA-Z-]+)/?"
      - "traefik.http.middlewares.well-known-oauth-server-replace-path.replacepathregex.replacement=/idp/realms/$2/.well-known/$1"
      - "traefik.http.routers.keycloak-health.rule=PathPrefix(`/idp/health`)"
      - "traefik.http.routers.keycloak-health.entrypoints=websecure"
      - "traefik.http.routers.keycloak-health.tls=true"
      - "traefik.http.routers.keycloak-health.service=keycloak-health"
      - "traefik.http.services.keycloak-health.loadbalancer.server.port=9000"
    networks:
      - wallet-ecosystem-network

  traefik:
    image: traefik:v3.6
    container_name: traefik
    restart: unless-stopped
    ports:
      - "443:443"
      - "80:80"
      - "8080:8080"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - ./config/traefik:/etc/traefik
    command:
      - "--ping"
      - "--api.dashboard=true"
      - "--api.insecure=true"
      - "--providers.docker=true"
      - "--providers.docker.exposedbydefault=false"
      - "--entrypoints.web.address=:80"
      - "--entrypoints.websecure.address=:443"
      - "--providers.file.directory=/etc/traefik"
      - "--providers.file.watch=true"
      - "--serverstransport.insecureskipverify=true"
      - "--entrypoints.web.http.redirections.entrypoint.to=websecure"
      - "--entrypoints.web.http.redirections.entrypoint.scheme=https"
    labels:
      - "traefik.enable=true"
    networks:
      wallet-ecosystem-network:
